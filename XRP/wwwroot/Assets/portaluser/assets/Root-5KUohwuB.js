import"./index-4z_yeP1J.js";import{d as n,i as a,u as i,e as c,B as o,P as t,j as d,k as f,l,m as p,o as _}from"./index-CjL5zVX3.js";import"./index-m6CAHOFr.js";const h=n({__name:"Root",setup(m){const e=a(),r=i();return c(async()=>{if(o.isTokenValid("access_token"))!e.loaded&&!e.loading&&e.fetchUserInfo(o.getUserInfo);else if(t.isTokenValid("access_token"))!e.loaded&&!e.loading&&e.fetchUserInfo(t.getUserInfo);else if(o.isTokenValid("refresh_token"))try{await o.refreshTokens({carrier:r.carrierCode,entity_type:"customer",entity_code:o.storage.id_token_claims.customer_code}),e.fetchUserInfo(o.getUserInfo)}catch{try{await o.getTokenSilently({carrier:r.carrierCode,scopes:["openid","profile","email"],response_type:"code",entity_type:"customer",entity_code:o.storage.id_token_claims.customer_code}),e.fetchUserInfo(o.getUserInfo)}catch{t.loginRedirect({scopes:["openid","profile","email"],response_type:"code"})}}}),(u,k)=>{const s=p("router-view");return l(e).loaded?(_(),d(s,{key:0})):f("",!0)}}});export{h as default};
